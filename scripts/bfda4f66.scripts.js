!function(){"use strict";angular.module("snakeGameApp",["ngRoute","keepr"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"scripts/main/views/main.html",controller:"MainCtrl",controllerAs:"mainCtrl"}).otherwise({redirectTo:"/"})}])}(),function(){"use strict";function a(a,b,c,d){this.board=[],this.isGameOver=!1,this.gameStarted=!1,this.interval=d.INTERVAL,this.score=0;var e=1;this.snake={direction:d.DIRECTIONS.LEFT,parts:[{x:-1,y:-1}]},this.fruit={x:-1,y:-1},this.getNewHead=function(){var a=angular.copy(this.snake.parts[0]);return c.tempDirection===d.DIRECTIONS.LEFT?a.x-=1:c.tempDirection===d.DIRECTIONS.RIGHT?a.x+=1:c.tempDirection===d.DIRECTIONS.UP?a.y-=1:c.tempDirection===d.DIRECTIONS.DOWN&&(a.y+=1),a},this.setStyling=function(a,b){return this.isGameOver?d.COLORS.GAME_OVER:this.fruit.x==b&&this.fruit.y==a?d.COLORS.FRUIT:this.snake.parts[0].x==b&&this.snake.parts[0].y==a?d.COLORS.SNAKE_HEAD:this.board[a][b]===!0?d.COLORS.SNAKE_BODY:d.COLORS.BOARD},this.addClassInTarget=function(a,b){return this.fruit.x==b&&this.fruit.y==a},this.update=function(){var a=this.getNewHead();if(this.boardCollision(a)||this.selfCollision(a))return this.gameOver();this.fruitCollision(a)&&this.eatFruit();var d=this.snake.parts.pop();this.board[d.y][d.x]=!1,this.snake.parts.unshift(a),this.board[a.y][a.x]=!0;var e=this;this.snake.direction=c.tempDirection,b(function(){e.update()},this.interval)},this.boardCollision=function(a){return a.x===d.BOARD_SIZE||-1===a.x||a.y===d.BOARD_SIZE||-1===a.y},this.selfCollision=function(a){return this.board[a.y][a.x]===!0},this.fruitCollision=function(a){return a.x===this.fruit.x&&a.y===this.fruit.y},this.resetFruit=function(){var a=Math.floor(Math.random()*d.BOARD_SIZE),b=Math.floor(Math.random()*d.BOARD_SIZE);return this.board[b][a]===!0?this.resetFruit():void(this.fruit={x:a,y:b})},this.eatFruit=function(){this.score=(this.score+1)*e;var a=angular.copy(this.snake.parts[this.snake.parts.length-1]);this.snake.parts.push(a),this.resetFruit(),this.score%5===0&&(e++,this.interval-=d.DECREASE_INTERVAL)},this.gameOver=function(){this.gameStarted=!1,this.isGameOver=!0;var a=this;b(function(){a.isGameOver=!1},d.GAME_OVER_TIMEOUT),this.setupBoard()},this.setupBoard=function(){this.board=[];for(var a=0;a<d.BOARD_SIZE;a++){this.board[a]=[];for(var b=0;b<d.BOARD_SIZE;b++)this.board[a][b]=!1}},this.startGame=function(){this.snake={direction:d.DIRECTIONS.LEFT,parts:[]},c.tempDirection=d.DIRECTIONS.LEFT;for(var a=0;5>a;a++)this.snake.parts.push({x:10+a,y:10});e=1,this.isGameOver=!1,this.interval=d.INTERVAL,this.score=0,this.gameStarted=!0,this.resetFruit(),this.update()},this.init=function(){this.setupBoard()},this.init()}angular.module("snakeGameApp").controller("MainCtrl",a),a.$inject=["$scope","$timeout","$rootScope","CONFIG"]}(),function(){"use strict";function a(a,b,c){this.setTempDirection=function(a){b.tempDirection=a},this.setUpDirection=function(){this.setTempDirection(c.DIRECTIONS.UP)},this.setDownDirection=function(){this.setTempDirection(c.DIRECTIONS.DOWN)},this.setLeftDirection=function(){this.setTempDirection(c.DIRECTIONS.LEFT)},this.setRightDirection=function(){this.setTempDirection(c.DIRECTIONS.RIGHT)}}angular.module("snakeGameApp").controller("SnakeControlCtrl",a),a.$inject=["$scope","$rootScope","CONFIG"]}(),function(){"use strict";angular.module("snakeGameApp").value("CONFIG",{DIRECTIONS:{LEFT:37,UP:38,RIGHT:39,DOWN:40},BOARD_SIZE:20,INTERVAL:200,GAME_OVER_TIMEOUT:300,DECREASE_INTERVAL:15,COLORS:{GAME_OVER:"#820303",FRUIT:"#E80505",SNAKE_HEAD:"#078F00",SNAKE_BODY:"#0DFF00",BOARD:"#000"}})}(),function(){"use strict";function a(a,b,c){var d={restrict:"A",scope:{snake:"="},link:function(d){a.addEventListener("keyup",function(a){a.keyCode==c.DIRECTIONS.LEFT&&d.snake.direction!==c.DIRECTIONS.RIGHT?b.tempDirection=c.DIRECTIONS.LEFT:a.keyCode==c.DIRECTIONS.UP&&d.snake.direction!==c.DIRECTIONS.DOWN?b.tempDirection=c.DIRECTIONS.UP:a.keyCode==c.DIRECTIONS.RIGHT&&d.snake.direction!==c.DIRECTIONS.LEFT?b.tempDirection=c.DIRECTIONS.RIGHT:a.keyCode==c.DIRECTIONS.DOWN&&d.snake.direction!==c.DIRECTIONS.UP&&(b.tempDirection=c.DIRECTIONS.DOWN)})}};return d}angular.module("snakeGameApp").directive("commands",a),a.$inject=["$window","$rootScope","CONFIG"]}(),function(){"use strict";function a(){var a={restrict:"E",templateUrl:"scripts/main/views/directives/snake-game.tpl.html"};return a}angular.module("snakeGameApp").directive("snakeGame",a)}(),function(){"use strict";function a(){var a={restrict:"E",templateUrl:"scripts/main/views/directives/snake-game-control.tpl.html"};return a}angular.module("snakeGameApp").directive("snakeGameControl",a)}(),function(){"use strict";function a(){var a={restrict:"E",templateUrl:"scripts/main/views/directives/snake-game-arrow-control.tpl.html",controller:"SnakeControlCtrl",controllerAs:"snakeControlCtrl"};return a}angular.module("snakeGameApp").directive("snakeGameArrowControl",a)}();